#!/bin/sh

FILES=$(git diff --cached --name-status | awk '$1 == "M" || $1 == "A" { print $2}' | grep '\.py$')


if black --check ${FILES}
then
    echo 'ğŸ¤— Black test passed âœ…'
    exit 0
else
    echo 'ğŸ”¥ğŸ”¥ğŸ”¥ Commit failed. âŒ You forgot to run "black ./". Running BLACK now:'
    black ${FILES}
    echo 'Done ğŸ„ğŸ¦ŒğŸ. Add reformatted files to your commit and try again'
    exit 1
fi

